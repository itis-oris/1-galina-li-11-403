<#import "base.ftlh" as layout>

<@layout.base pageTitle="–ú–æ–∏ –∞–≤—Ç–æ–º–æ–±–∏–ª–∏">
    <div style="max-width: 800px; margin: 0 auto;">
        <nav style="margin-bottom: 1rem;">
            <a href="${contextPath}/profile" class="btn">‚Üê –ù–∞–∑–∞–¥ –≤ –ø—Ä–æ—Ñ–∏–ª—å</a>
            <a href="${contextPath}/cars/new" class="btn btn-success">+ –î–æ–±–∞–≤–∏—Ç—å –∞–≤—Ç–æ–º–æ–±–∏–ª—å</a>
        </nav>

        <h1>–ú–æ–∏ –∞–≤—Ç–æ–º–æ–±–∏–ª–∏</h1>

        <#if cars?? && cars?size gt 0>
            <div class="card">
                <div style="display: grid; gap: 1rem;">
                    <#list cars as car>
                        <div style="border: 1px solid #ddd; padding: 1rem; border-radius: 8px;">
                            <div style="display: flex; justify-content: space-between; align-items: center;">
                                <div>
                                    <h3 style="margin: 0;">${car.brand!''} ${car.model!''}</h3>
                                    <p style="margin: 0.5rem 0 0 0; color: #666;">
                                        –ì–æ–¥: ${car.year!''}
                                    </p>
                                </div>
                                <div>
                                    <form action="${contextPath}/cars/delete" method="post" style="display: inline;">
                                        <input type="hidden" name="id" value="${car.id}">
                                        <button type="submit" class="btn" style="background: #e74c3c; padding: 6px 12px;"
                                                onclick="return confirm('–£–¥–∞–ª–∏—Ç—å –∞–≤—Ç–æ–º–æ–±–∏–ª—å?')">
                                            –£–¥–∞–ª–∏—Ç—å
                                        </button>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </#list>
                </div>
            </div>
        <#else>
            <div class="card" style="text-align: center; padding: 3rem;">
                <div style="font-size: 4rem; margin-bottom: 1rem;">üöó</div>
                <h3 style="color: #666;">–£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π</h3>
                <p>–î–æ–±–∞–≤—å—Ç–µ —Å–≤–æ–π –ø–µ—Ä–≤—ã–π –∞–≤—Ç–æ–º–æ–±–∏–ª—å</p>
                <a href="${contextPath}/cars/new" class="btn btn-success">–î–æ–±–∞–≤–∏—Ç—å –∞–≤—Ç–æ–º–æ–±–∏–ª—å</a>
            </div>
        </#if>
    </div>
</@layout.base>