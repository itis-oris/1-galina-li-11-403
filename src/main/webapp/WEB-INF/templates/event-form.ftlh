<#import "base.ftlh" as layout>

<@layout.base pageTitle=pageTitle!"–§–æ—Ä–º–∞ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è">
    <div style="max-width: 800px; margin: 0 auto;">
        <nav style="margin-bottom: 1rem;">
            <a href="${contextPath}/events" class="btn">‚Üê –í—Å–µ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è</a>
        </nav>

        <div class="card">
            <h1>${pageTitle!"–§–æ—Ä–º–∞ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è"}</h1>

            <#if errorMessage??>
                <div class="alert alert-error">${errorMessage}</div>
            </#if>

            <#if event??>
                <form action="${contextPath}/events/update" method="POST">
                    <input type="hidden" name="id" value="${event.id}">

                    <div class="form-group">
                        <label>–ù–∞–∑–≤–∞–Ω–∏–µ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è *</label>
                        <input type="text" name="title" value="${event.title!''}" required
                               style="width: 100%; padding: 10px; border: 1px solid #ccc; border-radius: 4px; font-size: 16px;">
                    </div>

                    <div class="form-group">
                        <label>–û–ø–∏—Å–∞–Ω–∏–µ</label>
                        <textarea name="description" rows="4"
                                  style="width: 100%; padding: 10px; border: 1px solid #ccc; border-radius: 4px; font-size: 16px;">${event.description!''}</textarea>
                    </div>

                    <div class="form-group">
                        <label>–ú–µ—Å—Ç–æ –ø—Ä–æ–≤–µ–¥–µ–Ω–∏—è *</label>
                        <input type="text" name="location" value="${event.location!''}" required
                               style="width: 100%; padding: 10px; border: 1px solid #ccc; border-radius: 4px; font-size: 16px;">
                    </div>

                    <div class="form-group">
                        <label>–î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è *</label>
                        <input type="text" name="eventDate" value="${event.eventDate!''}" required
                               style="width: 100%; padding: 10px; border: 1px solid #ccc; border-radius: 4px; font-size: 16px;"
                               placeholder="–ü—Ä–∏–º–µ—Ä: 2025-11-30T20:00">
                        <small>–§–æ—Ä–º–∞—Ç: –ì–ì–ì–ì-–ú–ú-–î–îT–ß–ß:MM</small>
                    </div>

                    <div class="form-group">
                        <label>–¢–∏–ø –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è *</label>
                        <select name="eventTypeId" required
                                style="width: 100%; padding: 10px; border: 1px solid #ccc; border-radius: 4px; font-size: 16px;">
                            <option value="">–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è</option>
                            <#list eventTypes as type>
                                <option value="${type.id}" <#if event.eventTypeId?? && event.eventTypeId == type.id>selected</#if>>
                                    ${type.name}
                                </option>
                            </#list>
                        </select>
                    </div>

                    <div style="display: flex; gap: 1rem; margin-top: 2rem;">
                        <button type="submit" class="btn btn-success" style="padding: 12px 24px; font-size: 16px;">
                            üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è
                        </button>
                        <a href="${contextPath}/events/${event.id}" class="btn" style="padding: 12px 24px; font-size: 16px;">
                            ‚ùå –û—Ç–º–µ–Ω–∞
                        </a>
                    </div>
                </form>


            <#else>
                <form action="${contextPath}/events/" method="POST">
                    <div class="form-group">
                        <label>–ù–∞–∑–≤–∞–Ω–∏–µ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è *</label>
                        <input type="text" name="title" required
                               style="width: 100%; padding: 10px; border: 1px solid #ccc; border-radius: 4px; font-size: 16px;"
                               placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è">
                    </div>

                    <div class="form-group">
                        <label>–û–ø–∏—Å–∞–Ω–∏–µ</label>
                        <textarea name="description" rows="4"
                                  style="width: 100%; padding: 10px; border: 1px solid #ccc; border-radius: 4px; font-size: 16px;"
                                  placeholder="–û–ø–∏—à–∏—Ç–µ –≤–∞—à–µ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–µ"></textarea>
                    </div>

                    <div class="form-group">
                        <label>–ú–µ—Å—Ç–æ –ø—Ä–æ–≤–µ–¥–µ–Ω–∏—è *</label>
                        <input type="text" name="location" required
                               style="width: 100%; padding: 10px; border: 1px solid #ccc; border-radius: 4px; font-size: 16px;"
                               placeholder="–£–∫–∞–∂–∏—Ç–µ –º–µ—Å—Ç–æ –ø—Ä–æ–≤–µ–¥–µ–Ω–∏—è">
                    </div>

                    <div class="form-group">
                        <label>–î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è *</label>
                        <input type="text" name="eventDate" required
                               style="width: 100%; padding: 10px; border: 1px solid #ccc; border-radius: 4px; font-size: 16px;"
                               placeholder="2025-11-30T20:00">
                        <small>–§–æ—Ä–º–∞—Ç: –ì–ì–ì–ì-–ú–ú-–î–îT–ß–ß:MM</small>
                    </div>

                    <div class="form-group">
                        <label>–¢–∏–ø –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è *</label>
                        <select name="eventTypeId" required
                                style="width: 100%; padding: 10px; border: 1px solid #ccc; border-radius: 4px; font-size: 16px;">
                            <option value="">–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è</option>
                            <#list eventTypes as type>
                                <option value="${type.id}">${type.name}</option>
                            </#list>
                        </select>
                    </div>

                    <div style="display: flex; gap: 1rem; margin-top: 2rem;">
                        <button type="submit" class="btn btn-success" style="padding: 12px 24px; font-size: 16px;">
                            –°–æ–∑–¥–∞—Ç—å –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–µ
                        </button>
                        <a href="${contextPath}/events" class="btn" style="padding: 12px 24px; font-size: 16px;">
                            ‚ùå –û—Ç–º–µ–Ω–∞
                        </a>
                    </div>
                </form>
            </#if>
        </div>
    </div>
</@layout.base>